public interface PropertyRepository extends JpaRepository<Property, Long> {
    Optional<Property> findByTypeAndValue(String type, String value);
}

@Service
public class PropertyService {

    private final PropertyRepository propertyRepository;

    public PropertyService(PropertyRepository propertyRepository) {
        this.propertyRepository = propertyRepository;
    }

    @Transactional
    public Property getOrCreate(String type, String value) {
        // Check if property exists
        return propertyRepository.findByTypeAndValue(type, value)
                .orElseGet(() -> {
                    // Create new if not exists
                    Property p = new Property();
                    p.setType(type);
                    p.setValue(value);
                    // Set default values for other fields if necessary
                    return propertyRepository.save(p);
                });
    }
}

CREATE TRIGGER trg_UpdateC_OnInsertOrAChange
ON YourTable
AFTER INSERT, UPDATE
AS
BEGIN
    SET NOCOUNT ON;

    -- Case 1: New rows (INSERT) → always set C
    UPDATE t
    SET C = SYSDATETIME()
    FROM YourTable t
    INNER JOIN inserted i ON t.PrimaryKeyColumn = i.PrimaryKeyColumn
    LEFT JOIN deleted d ON i.PrimaryKeyColumn = d.PrimaryKeyColumn
    WHERE d.PrimaryKeyColumn IS NULL;  -- new row (no "before" version exists)

    -- Case 2: Existing rows where A changed → update C
    UPDATE t
    SET C = SYSDATETIME()
    FROM YourTable t
    INNER JOIN inserted i ON t.PrimaryKeyColumn = i.PrimaryKeyColumn
    INNER JOIN deleted d ON i.PrimaryKeyColumn = d.PrimaryKeyColumn
    WHERE i.A <> d.A;  -- A value has changed
END
